<!doctype html>
<!--
    Tangram: real-time WebGL rendering for OpenStreetMap

    http://github.com/tangrams/tangram
    http://mapzen.com
-->
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tangram Differ</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.0-beta.2/leaflet.css" />
    <link rel="stylesheet" href="style.css" />

    <script>
    // load scene from url
    function loadButton() {
        var url = window.location;
        var newlocation = "?" + document.getElementById("loadtext").value;
        console.log('newlocation:', newlocation);
        window.location = newlocation;
    }
    </script>
  </head>

  <body>
    ~ Tangram begs to Differ ~<br><br>
    Load url: <input id="loadtext" value="views.json"></input><button id="gobutton" onclick="loadButton()">GO</button>
    <div id="examples">
        Example urls:<br>
        <a href="?views.json">views.json</a><br>
        <a href="?https://gist.githubusercontent.com/meetar/a7629802b06d3c260064/raw/6c0b9d149e1800eed11afd9cf498f8590ec9ced3/test-views.json">test-views.json</a><br>
        <a href="?https://raw.githubusercontent.com/tangrams/differ/gh-pages/test/test.json">test.json</a><br>
        <a href="?https://gist.githubusercontent.com/meetar/4063a564e99c224ecbfd/raw/29b02d70293de17fa7283e2465a0b99e61eef7ed/problem.json">problem.json</a>
    </div>
    <!-- set up containers for old, new, and difference -->
    <div id="map"></div>
    <!-- headers -->
    <div id="alert" class="header">Enter a local filename or URL to start diffing.<br></div>
    <div id="useragent" class="header"></div>
    <div id="status" class="header">&nbsp;</div>
    <div id="totalScore" class="header">&nbsp;</div>
    <!-- controls -->
    <div id="headers" class="header">
        <button onclick="makeContactSheet()">Export contact sheet</button>
        <button onclick="makeInfoJSON()">Export info json</button>
        <!-- <button onclick="rerunAll()">Re-run all tests</button> -->
        <!-- <button onclick="stop()">Stop tests</button> -->
    </div>
    <div id="tests"></div>

    <!-- 3rd party libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.0-beta.2/leaflet.js"></script>
    <!-- bog-standard leaflet URL hash -->
    <script src="lib/leaflet-hash.js"></script>
    <!-- write data to a file and save it to disk -->
    <script src="lib/FileSaver.js"></script>
    <!-- compare two images -->
    <script src="lib/pixelmatch.js"></script>
    <!-- make animated gif -->
    <script src="gif.js"></script>
    <!-- End of 3rd party libraries -->

    <!-- Main tangram library -->
    <script src="https://mapzen.com/tangram/0.5/tangram.debug.js"></script>
    
    <!-- differ code -->
    <script src="differ.js"></script>

    <!-- Adding a script block to post message to the parent container (think iframed demos) -->
    <script type="text/javascript">
      window.addEventListener("hashchange",function(){parent.postMessage(window.location.hash, "*")});
    </script>

  </body>
</html>
